{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState } from \"react\";\n\nfunction useRoom() {\n  _s();\n\n  const [members, setMembers] = useState([]);\n  const [message, setMessage] = useState(\"\");\n\n  const joinRoom = async (room, user_id) => {\n    socket.emit(\"join_room\", `room${room}`);\n    const membersAfterPost = await api.post(`/messages/room${room}/members`, {\n      user_id\n    }).then(res => res.data);\n    setMembers(membersAfterPost);\n  };\n\n  const leaveRoom = async (room, user_id) => {\n    socket.emit(\"leave_room\", `room${room}`);\n    await api.delete(`/messages/room${room}/members?user=${user_id}`);\n    setMembers([]);\n  };\n\n  const sendMessage = (user, message, roomId) => {\n    if (message.replace(/\\s+/g, '').length === 0) return;\n    socket.emit(\"send_message\", { ...user,\n      message,\n      room: `room${roomId}`\n    });\n    setMessage(\"\");\n  };\n\n  return {\n    members,\n    setMembers,\n    message,\n    setMessage,\n    joinRoom,\n    leaveRoom,\n    sendMessage\n  };\n}\n\n_s(useRoom, \"3UNOWKQ0m/VhajPbkKYIlB2Xr9M=\");\n\nexport default useRoom;","map":{"version":3,"names":["useState","useRoom","members","setMembers","message","setMessage","joinRoom","room","user_id","socket","emit","membersAfterPost","api","post","then","res","data","leaveRoom","delete","sendMessage","user","roomId","replace","length"],"sources":["C:/Users/DENI/Desktop/код/vsCode/authJWT/client/src/hooks/useRoom.js"],"sourcesContent":["import { useState } from \"react\"\r\n\r\nfunction useRoom() {\r\n    const [members, setMembers] = useState([])\r\n    const [message, setMessage] = useState(\"\")\r\n\r\n\r\n    const joinRoom = async (room, user_id) => {\r\n        socket.emit(\"join_room\", `room${room}`)\r\n        const membersAfterPost = await api.post(`/messages/room${room}/members`, {user_id}).then(res => res.data)\r\n        setMembers(membersAfterPost)\r\n    }\r\n\r\n    const leaveRoom = async (room, user_id) => {\r\n        socket.emit(\"leave_room\", `room${room}`)\r\n        await api.delete(`/messages/room${room}/members?user=${user_id}`)\r\n        setMembers([])\r\n    }\r\n      \r\n    const sendMessage = (user, message, roomId) => {\r\n        if (message.replace(/\\s+/g, '').length === 0) return\r\n        socket.emit(\"send_message\", {...user, message, room: `room${roomId}`})\r\n        setMessage(\"\")\r\n    } \r\n\r\n    return {members, setMembers, message, setMessage, joinRoom, leaveRoom, sendMessage}\r\n}\r\n\r\nexport default useRoom"],"mappings":";;AAAA,SAASA,QAAT,QAAyB,OAAzB;;AAEA,SAASC,OAAT,GAAmB;EAAA;;EACf,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBH,QAAQ,CAAC,EAAD,CAAtC;EACA,MAAM,CAACI,OAAD,EAAUC,UAAV,IAAwBL,QAAQ,CAAC,EAAD,CAAtC;;EAGA,MAAMM,QAAQ,GAAG,OAAOC,IAAP,EAAaC,OAAb,KAAyB;IACtCC,MAAM,CAACC,IAAP,CAAY,WAAZ,EAA0B,OAAMH,IAAK,EAArC;IACA,MAAMI,gBAAgB,GAAG,MAAMC,GAAG,CAACC,IAAJ,CAAU,iBAAgBN,IAAK,UAA/B,EAA0C;MAACC;IAAD,CAA1C,EAAqDM,IAArD,CAA0DC,GAAG,IAAIA,GAAG,CAACC,IAArE,CAA/B;IACAb,UAAU,CAACQ,gBAAD,CAAV;EACH,CAJD;;EAMA,MAAMM,SAAS,GAAG,OAAOV,IAAP,EAAaC,OAAb,KAAyB;IACvCC,MAAM,CAACC,IAAP,CAAY,YAAZ,EAA2B,OAAMH,IAAK,EAAtC;IACA,MAAMK,GAAG,CAACM,MAAJ,CAAY,iBAAgBX,IAAK,iBAAgBC,OAAQ,EAAzD,CAAN;IACAL,UAAU,CAAC,EAAD,CAAV;EACH,CAJD;;EAMA,MAAMgB,WAAW,GAAG,CAACC,IAAD,EAAOhB,OAAP,EAAgBiB,MAAhB,KAA2B;IAC3C,IAAIjB,OAAO,CAACkB,OAAR,CAAgB,MAAhB,EAAwB,EAAxB,EAA4BC,MAA5B,KAAuC,CAA3C,EAA8C;IAC9Cd,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA4B,EAAC,GAAGU,IAAJ;MAAUhB,OAAV;MAAmBG,IAAI,EAAG,OAAMc,MAAO;IAAvC,CAA5B;IACAhB,UAAU,CAAC,EAAD,CAAV;EACH,CAJD;;EAMA,OAAO;IAACH,OAAD;IAAUC,UAAV;IAAsBC,OAAtB;IAA+BC,UAA/B;IAA2CC,QAA3C;IAAqDW,SAArD;IAAgEE;EAAhE,CAAP;AACH;;GAxBQlB,O;;AA0BT,eAAeA,OAAf"},"metadata":{},"sourceType":"module"}