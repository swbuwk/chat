{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DENI\\\\Desktop\\\\\\u043A\\u043E\\u0434\\\\vsCode\\\\authJWT\\\\client\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isAuth, setIsAuth] = useState(false);\n  const [user, setUser] = useState({});\n  const [users, setUsers] = useState([]);\n\n  async function login(email, password) {\n    try {\n      const res = await AuthService.login(email, password);\n      const accessToken = res.data.accessToken;\n      localStorage.setItem(\"token\", accessToken);\n      setIsAuth(true);\n      setUser(res.data.user);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  async function registration(email, password) {\n    try {\n      const res = await AuthService.registration(email, password);\n      const accessToken = res.data.accessToken;\n      localStorage.setItem(\"token\", accessToken);\n      setIsAuth(true);\n      setUser(res.data.user);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  async function logout() {\n    try {\n      const res = await AuthService.logout();\n      localStorage.removeItem(\"token\");\n      setIsAuth(false);\n      setUser({});\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  async function checkAuth() {\n    try {\n      const res = (await axios.get) < AuthResponse > (`${API_URL}/refresh`, {\n        withCredentials: true\n      });\n      const accessToken = res.data.accessToken;\n      localStorage.setItem(\"token\", accessToken);\n      setIsAuth(true);\n      setUser(res.data.user);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  async function getUsers() {\n    try {\n      const res = await UserService.getUsers();\n      setUsers(res.data);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"IuGoO0N0tjeEMEYuTv6+6kGnS5Y=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["App","email","setEmail","useState","password","setPassword","isAuth","setIsAuth","user","setUser","users","setUsers","login","res","AuthService","accessToken","data","localStorage","setItem","e","console","log","registration","logout","removeItem","checkAuth","axios","get","AuthResponse","API_URL","withCredentials","getUsers","UserService"],"sources":["C:/Users/DENI/Desktop/код/vsCode/authJWT/client/src/App.js"],"sourcesContent":["import './App.css';\n\nfunction App() {\n  const [email, setEmail] = useState(\"\")\n    const [password, setPassword] = useState(\"\")\n    const [isAuth, setIsAuth] = useState(false)\n    const [user, setUser] = useState({})\n    const [users, setUsers] = useState([])\n\n    async function login(email, password) {\n      try {\n        const res = await AuthService.login(email, password)\n        const accessToken = res.data.accessToken\n        localStorage.setItem(\"token\", accessToken)\n        setIsAuth(true)\n        setUser(res.data.user)\n      } catch(e) {\n        console.log(e)\n      }\n    } \n\n    async function registration(email, password) {\n      try {\n        const res = await AuthService.registration(email, password)\n        const accessToken = res.data.accessToken\n        localStorage.setItem(\"token\", accessToken)\n        setIsAuth(true)\n        setUser(res.data.user)\n      } catch(e) {\n        console.log(e)\n      }\n    } \n\n    async function logout() {\n      try {\n        const res = await AuthService.logout()\n        localStorage.removeItem(\"token\")\n        setIsAuth(false)\n        setUser({})\n      } catch(e) {\n        console.log(e)\n      }\n    }\n\n    async function checkAuth() {\n      try {\n        const res = await axios.get<AuthResponse>(`${API_URL}/refresh`, {withCredentials: true})\n        const accessToken = res.data.accessToken\n        localStorage.setItem(\"token\", accessToken)\n        setIsAuth(true)\n        setUser(res.data.user)\n      } catch(e) {\n        console.log(e)\n      }\n    }\n\n    async function getUsers() {\n      try {\n        const res = await UserService.getUsers()\n        setUsers(res.data)\n      } catch(e) {\n        console.log(e)\n      }\n    }\n\n  return (\n    <div className=\"App\">\n      \n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":";;;AAAA,OAAO,WAAP;;;AAEA,SAASA,GAAT,GAAe;EAAA;;EACb,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBC,QAAQ,CAAC,EAAD,CAAlC;EACE,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BF,QAAQ,CAAC,EAAD,CAAxC;EACA,MAAM,CAACG,MAAD,EAASC,SAAT,IAAsBJ,QAAQ,CAAC,KAAD,CAApC;EACA,MAAM,CAACK,IAAD,EAAOC,OAAP,IAAkBN,QAAQ,CAAC,EAAD,CAAhC;EACA,MAAM,CAACO,KAAD,EAAQC,QAAR,IAAoBR,QAAQ,CAAC,EAAD,CAAlC;;EAEA,eAAeS,KAAf,CAAqBX,KAArB,EAA4BG,QAA5B,EAAsC;IACpC,IAAI;MACF,MAAMS,GAAG,GAAG,MAAMC,WAAW,CAACF,KAAZ,CAAkBX,KAAlB,EAAyBG,QAAzB,CAAlB;MACA,MAAMW,WAAW,GAAGF,GAAG,CAACG,IAAJ,CAASD,WAA7B;MACAE,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BH,WAA9B;MACAR,SAAS,CAAC,IAAD,CAAT;MACAE,OAAO,CAACI,GAAG,CAACG,IAAJ,CAASR,IAAV,CAAP;IACD,CAND,CAME,OAAMW,CAAN,EAAS;MACTC,OAAO,CAACC,GAAR,CAAYF,CAAZ;IACD;EACF;;EAED,eAAeG,YAAf,CAA4BrB,KAA5B,EAAmCG,QAAnC,EAA6C;IAC3C,IAAI;MACF,MAAMS,GAAG,GAAG,MAAMC,WAAW,CAACQ,YAAZ,CAAyBrB,KAAzB,EAAgCG,QAAhC,CAAlB;MACA,MAAMW,WAAW,GAAGF,GAAG,CAACG,IAAJ,CAASD,WAA7B;MACAE,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BH,WAA9B;MACAR,SAAS,CAAC,IAAD,CAAT;MACAE,OAAO,CAACI,GAAG,CAACG,IAAJ,CAASR,IAAV,CAAP;IACD,CAND,CAME,OAAMW,CAAN,EAAS;MACTC,OAAO,CAACC,GAAR,CAAYF,CAAZ;IACD;EACF;;EAED,eAAeI,MAAf,GAAwB;IACtB,IAAI;MACF,MAAMV,GAAG,GAAG,MAAMC,WAAW,CAACS,MAAZ,EAAlB;MACAN,YAAY,CAACO,UAAb,CAAwB,OAAxB;MACAjB,SAAS,CAAC,KAAD,CAAT;MACAE,OAAO,CAAC,EAAD,CAAP;IACD,CALD,CAKE,OAAMU,CAAN,EAAS;MACTC,OAAO,CAACC,GAAR,CAAYF,CAAZ;IACD;EACF;;EAED,eAAeM,SAAf,GAA2B;IACzB,IAAI;MACF,MAAMZ,GAAG,GAAG,OAAMa,KAAK,CAACC,GAAZ,IAAgBC,YAAhB,IAA+B,GAAEC,OAAQ,UAAX,EAAsB;QAACC,eAAe,EAAE;MAAlB,CAApD,CAAZ;MACA,MAAMf,WAAW,GAAGF,GAAG,CAACG,IAAJ,CAASD,WAA7B;MACAE,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BH,WAA9B;MACAR,SAAS,CAAC,IAAD,CAAT;MACAE,OAAO,CAACI,GAAG,CAACG,IAAJ,CAASR,IAAV,CAAP;IACD,CAND,CAME,OAAMW,CAAN,EAAS;MACTC,OAAO,CAACC,GAAR,CAAYF,CAAZ;IACD;EACF;;EAED,eAAeY,QAAf,GAA0B;IACxB,IAAI;MACF,MAAMlB,GAAG,GAAG,MAAMmB,WAAW,CAACD,QAAZ,EAAlB;MACApB,QAAQ,CAACE,GAAG,CAACG,IAAL,CAAR;IACD,CAHD,CAGE,OAAMG,CAAN,EAAS;MACTC,OAAO,CAACC,GAAR,CAAYF,CAAZ;IACD;EACF;;EAEH,oBACE;IAAK,SAAS,EAAC;EAAf;IAAA;IAAA;IAAA;EAAA,QADF;AAKD;;GApEQnB,G;;KAAAA,G;AAsET,eAAeA,GAAf"},"metadata":{},"sourceType":"module"}