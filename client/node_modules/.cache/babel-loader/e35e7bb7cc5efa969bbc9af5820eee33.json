{"ast":null,"code":"import AuthService from \"../services/AuthService\";\nimport { setUserData, eraseUserData } from \"./userSlice\";\nimport axios from \"axios\";\nimport { API_URL } from \"../http\";\nimport { setError } from \"./errorSlice\";\nexport const login = (email, password) => async dispatch => {\n  try {\n    const res = await AuthService.login(email, password);\n    console.log(res.data);\n    const accessToken = res.data.accessToken;\n    localStorage.setItem(\"token\", accessToken);\n    dispatch(setUserData(res.data));\n  } catch (e) {\n    dispatch(setError(e.response.data));\n  }\n};\nexport const registration = (name, email, password) => async dispatch => {\n  try {\n    const res = await AuthService.registration(name, email, password);\n    console.log(res.data);\n    const accessToken = res.data.accessToken;\n    localStorage.setItem(\"token\", accessToken);\n    dispatch(setUserData(res.data));\n  } catch (e) {\n    dispatch(setError(e.response.data));\n  }\n};\nexport const checkAuth = () => async dispatch => {\n  try {\n    const res = await axios.get(`${API_URL}/refresh`, {\n      withCredentials: true\n    });\n    const accessToken = res.data.accessToken;\n    localStorage.setItem(\"token\", accessToken);\n    dispatch(setUserData(res.data));\n  } catch (e) {\n    dispatch(setError(e.response.data));\n  }\n};\nexport const logout = email => async dispatch => {\n  try {\n    const res = await AuthService.logout(email);\n    localStorage.removeItem(\"token\");\n    dispatch(eraseUserData());\n  } catch (e) {\n    dispatch(setError(e.response.data));\n  }\n};","map":{"version":3,"names":["AuthService","setUserData","eraseUserData","axios","API_URL","setError","login","email","password","dispatch","res","console","log","data","accessToken","localStorage","setItem","e","response","registration","name","checkAuth","get","withCredentials","logout","removeItem"],"sources":["C:/Users/DENI/Desktop/код/vsCode/authJWT/client/src/store/actionCreator.js"],"sourcesContent":["import AuthService from \"../services/AuthService\"\r\nimport { setUserData, eraseUserData } from \"./userSlice\"\r\nimport axios from \"axios\"\r\nimport { API_URL } from \"../http\"\r\nimport { setError } from \"./errorSlice\"\r\n\r\nexport const login = (email, password) => async (dispatch) => {\r\n    try {\r\n        const res = await AuthService.login(email, password)\r\n        console.log(res.data)\r\n        const accessToken = res.data.accessToken\r\n        localStorage.setItem(\"token\", accessToken)\r\n        dispatch(setUserData(res.data))\r\n    } catch(e) {\r\n        dispatch(setError(e.response.data))\r\n    }\r\n}\r\n\r\nexport const registration = (name, email, password) => async (dispatch) => {\r\n    try {\r\n        const res = await AuthService.registration(name, email, password)\r\n        console.log(res.data)\r\n        const accessToken = res.data.accessToken\r\n        localStorage.setItem(\"token\", accessToken)\r\n        dispatch(setUserData(res.data))\r\n    } catch(e) {\r\n        dispatch(setError(e.response.data))\r\n    }\r\n}\r\n\r\nexport const checkAuth = () => async (dispatch) => {\r\n      try {\r\n          const res = await axios.get(`${API_URL}/refresh`, {withCredentials: true})\r\n          const accessToken = res.data.accessToken\r\n          localStorage.setItem(\"token\", accessToken)\r\n          dispatch(setUserData(res.data))\r\n      } catch(e) {\r\n          dispatch(setError(e.response.data))\r\n      }\r\n}\r\n\r\nexport const logout = (email) => async (dispatch) => {\r\n    try {\r\n        const res = await AuthService.logout(email)\r\n        localStorage.removeItem(\"token\")\r\n        dispatch(eraseUserData())\r\n    } catch(e) {\r\n        dispatch(setError(e.response.data))\r\n    }\r\n}"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,yBAAxB;AACA,SAASC,WAAT,EAAsBC,aAAtB,QAA2C,aAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,SAAxB;AACA,SAASC,QAAT,QAAyB,cAAzB;AAEA,OAAO,MAAMC,KAAK,GAAG,CAACC,KAAD,EAAQC,QAAR,KAAqB,MAAOC,QAAP,IAAoB;EAC1D,IAAI;IACA,MAAMC,GAAG,GAAG,MAAMV,WAAW,CAACM,KAAZ,CAAkBC,KAAlB,EAAyBC,QAAzB,CAAlB;IACAG,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB;IACA,MAAMC,WAAW,GAAGJ,GAAG,CAACG,IAAJ,CAASC,WAA7B;IACAC,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,WAA9B;IACAL,QAAQ,CAACR,WAAW,CAACS,GAAG,CAACG,IAAL,CAAZ,CAAR;EACH,CAND,CAME,OAAMI,CAAN,EAAS;IACPR,QAAQ,CAACJ,QAAQ,CAACY,CAAC,CAACC,QAAF,CAAWL,IAAZ,CAAT,CAAR;EACH;AACJ,CAVM;AAYP,OAAO,MAAMM,YAAY,GAAG,CAACC,IAAD,EAAOb,KAAP,EAAcC,QAAd,KAA2B,MAAOC,QAAP,IAAoB;EACvE,IAAI;IACA,MAAMC,GAAG,GAAG,MAAMV,WAAW,CAACmB,YAAZ,CAAyBC,IAAzB,EAA+Bb,KAA/B,EAAsCC,QAAtC,CAAlB;IACAG,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB;IACA,MAAMC,WAAW,GAAGJ,GAAG,CAACG,IAAJ,CAASC,WAA7B;IACAC,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,WAA9B;IACAL,QAAQ,CAACR,WAAW,CAACS,GAAG,CAACG,IAAL,CAAZ,CAAR;EACH,CAND,CAME,OAAMI,CAAN,EAAS;IACPR,QAAQ,CAACJ,QAAQ,CAACY,CAAC,CAACC,QAAF,CAAWL,IAAZ,CAAT,CAAR;EACH;AACJ,CAVM;AAYP,OAAO,MAAMQ,SAAS,GAAG,MAAM,MAAOZ,QAAP,IAAoB;EAC7C,IAAI;IACA,MAAMC,GAAG,GAAG,MAAMP,KAAK,CAACmB,GAAN,CAAW,GAAElB,OAAQ,UAArB,EAAgC;MAACmB,eAAe,EAAE;IAAlB,CAAhC,CAAlB;IACA,MAAMT,WAAW,GAAGJ,GAAG,CAACG,IAAJ,CAASC,WAA7B;IACAC,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,WAA9B;IACAL,QAAQ,CAACR,WAAW,CAACS,GAAG,CAACG,IAAL,CAAZ,CAAR;EACH,CALD,CAKE,OAAMI,CAAN,EAAS;IACPR,QAAQ,CAACJ,QAAQ,CAACY,CAAC,CAACC,QAAF,CAAWL,IAAZ,CAAT,CAAR;EACH;AACN,CATM;AAWP,OAAO,MAAMW,MAAM,GAAIjB,KAAD,IAAW,MAAOE,QAAP,IAAoB;EACjD,IAAI;IACA,MAAMC,GAAG,GAAG,MAAMV,WAAW,CAACwB,MAAZ,CAAmBjB,KAAnB,CAAlB;IACAQ,YAAY,CAACU,UAAb,CAAwB,OAAxB;IACAhB,QAAQ,CAACP,aAAa,EAAd,CAAR;EACH,CAJD,CAIE,OAAMe,CAAN,EAAS;IACPR,QAAQ,CAACJ,QAAQ,CAACY,CAAC,CAACC,QAAF,CAAWL,IAAZ,CAAT,CAAR;EACH;AACJ,CARM"},"metadata":{},"sourceType":"module"}