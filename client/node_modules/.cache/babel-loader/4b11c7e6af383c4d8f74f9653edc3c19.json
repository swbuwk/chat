{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DENI\\\\Desktop\\\\\\u043A\\u043E\\u0434\\\\vsCode\\\\authJWT\\\\client\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport { useState } from 'react';\nimport './App.css';\nimport { API_URL } from './http';\nimport AuthService from './services/AuthService';\nimport UserService from './services/UserService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isAuth, setIsAuth] = useState(false);\n  const [user, setUser] = useState({});\n  const [users, setUsers] = useState([]);\n\n  async function login(email, password) {\n    try {\n      const res = await AuthService.login(email, password);\n      const accessToken = res.data.accessToken;\n      localStorage.setItem(\"token\", accessToken);\n      setIsAuth(true);\n      setUser(res.data.user);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  async function registration(email, password) {\n    try {\n      const res = await AuthService.registration(email, password);\n      const accessToken = res.data.accessToken;\n      localStorage.setItem(\"token\", accessToken);\n      setIsAuth(true);\n      setUser(res.data.user);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  async function logout() {\n    try {\n      const res = await AuthService.logout();\n      localStorage.removeItem(\"token\");\n      setIsAuth(false);\n      setUser({});\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  async function checkAuth() {\n    try {\n      const res = await axios.get(`${API_URL}/refresh`, {\n        withCredentials: true\n      });\n      const accessToken = res.data.accessToken;\n      localStorage.setItem(\"token\", accessToken);\n      setIsAuth(true);\n      setUser(res.data.user);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  async function getUsers() {\n    try {\n      const res = await UserService.getUsers();\n      setUsers(res.data);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"IuGoO0N0tjeEMEYuTv6+6kGnS5Y=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["axios","useState","API_URL","AuthService","UserService","App","email","setEmail","password","setPassword","isAuth","setIsAuth","user","setUser","users","setUsers","login","res","accessToken","data","localStorage","setItem","e","console","log","registration","logout","removeItem","checkAuth","get","withCredentials","getUsers"],"sources":["C:/Users/DENI/Desktop/код/vsCode/authJWT/client/src/App.js"],"sourcesContent":["import axios from 'axios';\nimport { useState } from 'react';\nimport './App.css';\nimport { API_URL } from './http';\nimport AuthService from './services/AuthService';\nimport UserService from './services/UserService';\n\nfunction App() {\n  const [email, setEmail] = useState(\"\")\n    const [password, setPassword] = useState(\"\")\n    const [isAuth, setIsAuth] = useState(false)\n    const [user, setUser] = useState({})\n    const [users, setUsers] = useState([])\n\n    async function login(email, password) {\n      try {\n        const res = await AuthService.login(email, password)\n        const accessToken = res.data.accessToken\n        localStorage.setItem(\"token\", accessToken)\n        setIsAuth(true)\n        setUser(res.data.user)\n      } catch(e) {\n        console.log(e)\n      }\n    } \n\n    async function registration(email, password) {\n      try {\n        const res = await AuthService.registration(email, password)\n        const accessToken = res.data.accessToken\n        localStorage.setItem(\"token\", accessToken)\n        setIsAuth(true)\n        setUser(res.data.user)\n      } catch(e) {\n        console.log(e)\n      }\n    } \n\n    async function logout() {\n      try {\n        const res = await AuthService.logout()\n        localStorage.removeItem(\"token\")\n        setIsAuth(false)\n        setUser({})\n      } catch(e) {\n        console.log(e)\n      }\n    }\n\n    async function checkAuth() {\n      try {\n        const res = await axios.get(`${API_URL}/refresh`, {withCredentials: true})\n        const accessToken = res.data.accessToken\n        localStorage.setItem(\"token\", accessToken)\n        setIsAuth(true)\n        setUser(res.data.user)\n      } catch(e) {\n        console.log(e)\n      }\n    }\n\n    async function getUsers() {\n      try {\n        const res = await UserService.getUsers()\n        setUsers(res.data)\n      } catch(e) {\n        console.log(e)\n      }\n    }\n\n  return (\n    <div className=\"App\">\n      \n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}